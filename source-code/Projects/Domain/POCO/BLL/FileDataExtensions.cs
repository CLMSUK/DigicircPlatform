
// Copyright (c) CLMS UK. All rights reserved.
// Licensed under the Custom License. See LICENSE file in the project root for full license information.
// This was autogenerated by zAppDev.

using System;
using System.Runtime.Serialization;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Reflection;
using System.Collections;
using zAppDev.DotNet.Framework.Utilities;
using zAppDev.DotNet.Framework.Configuration;
using zAppDev.DotNet.Framework.Data.Domain;
using NHibernate.Linq;

using DigicircMatchmaking.DAL;
using DigicircMatchmaking.DAL.Queries;
namespace DigicircMatchmaking.BO
{
    /// <summary>
    /// The FileData extensions
    /// </summary>
    public static class FileDataExtensions
    {
        public static string GetAbsolutePath(this BO.FileData @this)
        {
            if ((@this?.StorageMedium == DigicircMatchmaking.BO.StorageMedium.DataBase))
            {
                return null;
            }
            string relativePath = System.IO.Path.Combine((@this?.FolderPath ?? ""), (@this?.FileName ?? ""));
            return zAppDev.DotNet.Framework.Utilities.Web.MapPath(System.IO.Path.Combine("~/App_Data/Uploads", relativePath));
        }


        public static System.Collections.Generic.List<System.Byte> GetThumbnail(this BO.FileData @this, int? width, int? height)
        {
            if ((@this?.StorageMedium == DigicircMatchmaking.BO.StorageMedium.DataBase))
            {
                return zAppDev.DotNet.Framework.Utilities.Imaging.GetThumbnail(@this?.Blob, (width).GetValueOrDefault(0), (height).GetValueOrDefault(0));;
            }
            else
            {
                System.Byte[] image = System.IO.File.ReadAllBytes((@this?.GetAbsolutePath() ?? ""));
                return zAppDev.DotNet.Framework.Utilities.Imaging.GetThumbnail(image, (width).GetValueOrDefault(0), (height).GetValueOrDefault(0));;
            }
        }




    }
}
